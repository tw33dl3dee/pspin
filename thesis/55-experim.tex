\chapter{Проведение экспериментов}
\label{cha:experiments}

\section{Выбор факторов и их уровней}
\label{sec:experiment-strategy}

Основной целью являлось создание средства проверки моделей, которое бы могло проверять
модели б\'{о}льшего размера, чем это позволяют существующие средства с последовательной
генерацией. Поэтому главным проверяемым фактором является принципиальная возможность
проверки таких моделей. 

Проверка моделей может занимает долгое время. Поскольку на практике модель редко бывает
задана сразу без ошибок, процесс ее отладки и проверки может включать в себя много
прогонов, поэтому время является важным фактором. Необходимо убедиться, что время проверки
модели растет линейно с ее размером и не является существенно худшим, чем при проверке
существующими средствами.

Было спроектировано и реализовано два различных способа распределения состояний по
узлам. Их сравнение включает в себя сравнение количества удаленных вызовов, степень
равномерности распределения и итоговое время работы.

\section{Средства для проведения эксперимента}
\label{sec:experiment-idef0}

Для экспериментов использовался кластер~МГТУ, состоящий из 102 вычислительных
узлов. Каждый узел имеет 4 процессора Intel\regsign Xeon\regsign~5120 с тактовой частотой
$1.86$~ГГц и 4 Гб оперативной памяти; узлы соединены 10-гигабитной шиной Infiniband. На
узлах установлена ОС RHEL~5.3 и библиотека Intel~MPI~3.1.

Разработанное средство проверки моделей помимо результата проверки и контрпримера выдает
также детальную информацию о ходе работе: время выполнения/ожидания, количество
сохраненных состояний, выполненных переходов, удаленных вызовов, степень заполнения
хэш-таблицы и количество коллизий\etc Полученная информация обрабатывается набором
сценариев на языке \Code{Python} для выдачи в табличном формате. Полученные табличные
данные наглядно оформляются при помощи программы \Code{gnuplot} в виде графиков.

Функциональная схема проведения экспериментов показана на рис.~\ref{fig:exp-idef0}.

\begin{figure}[ht]
  \centering
  \includegraphics[width=1\textwidth]{../graphics/exp-idef0}
  \caption{Функциональная схема проведения экспериментов}
  \label{fig:exp-idef0}
\end{figure}

\section{Выбор исходных данных}
\label{sec:experiment-models}

\section{Зависимость количества состояний от времени}
\label{sec:space-time}

\begin{figure}[ht]
  \centering
  \includegraphics[width=1\textwidth]{../data/plots/states-speed}
  \caption{Зависимость времени генерации от числа состояний}
  \label{fig:states-speed}
\end{figure}

\section{Скорость генерации состояний}
\label{sec:stategen-speed}

Данный тест носит синтетический характер: сравнение скорости собственно генерации
состояний разработанного генератора со скоростью работы Spin. В данном тесте не
учитываются сетевые задержки, поэтому тест проводился в виде последовательной генерации
состояний на одной машине (процессор Intel\regsign Core\tmsign2 Duo E6850 3.00~ГГц, 2
Гбайт оперативной памяти).

Для эксперимента использовались две уже упомянутые модели, \Code{Philo} и \Code{Election},
а также модель алгоритма критической секции Петерсона~\cite{SPIN}. Результаты эксперимента
приведены в табл.~\ref{tab:stategen-speed}. Учитываются все сгенерированные состояния, в
том числе уже однажды посещенные.

\begin{table}[ht]
  \centering
  \caption{Сравнение скорости генерации состояний}
  \begin{tabular}{cccc}
    \hline
    Модель & ПО Spin,   & Разработанное ПО, & Отношение \\
           &  сост./сек &  сост./сек        &           \\
    \hline
    \input{../data/stategen-speed.tex}
    \hline
  \end{tabular}
  \label{tab:stategen-speed}
\end{table}

Из эксперимента видно, что скорость генерации состояний сравнима с таковой в ПО Spin, что
свидетельствует о хорошем качестве генерируемого кода.

\section{Сравнение распределения состояний}
\label{sec:experiment-partition-cmp}

\begin{figure}[p]
  \centering
  \includegraphics[width=2\textwidth]{../data/plots/state-partition1}
  \caption{Распределение состояний между узлами; срез по типу распределения}
  \label{fig:state-partition1}
\end{figure}

\begin{figure}[p]
  \centering
  \includegraphics[height=0.9\textheight]{../data/plots/state-partition2}
  \caption{Распределение состояний между узлами; срез по модели}
  \label{fig:state-partition2}
\end{figure}

\section{Анализ результатов}
\label{sec:experiment-analysis}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "thesis"
%%% End: 
